/** Built on 2014-05-28T16:07:12 **/
!function(){"use strict";function createModule(){angular.module("pretend").factory("Pretend",["$rootScope","$q","$injector",function($rootScope,$q,$injector){function initializeMock(objectName){var instance=$injector.get(objectName),props=Object.keys(instance);angular.forEach(props,function(prop){var type=getPropertyType(instance,prop);setProperty(prop,type,DEFAULT_RETURN_VALUE)})}function getPropertyType(instance,property){var prop=instance[property],isMethod="function"==typeof prop;return isMethod?-1===prop.toString().indexOf(".promise")?"method":"promise":"property"}function setProperty(propertyName,type,value){var property=properties[propertyName]={name:propertyName,type:type,spy:void 0};setPropertyValue(property,value)}function setPropertyValue(property,value){"property"===property.type?mock[property.name]=value:(mock[property.name]=null,property.spy=spyOn(mock,property.name).and.callFake(function(){var args=arguments;if("promise"===property.type){var deferred=$q.defer();return property.deferred=function(reject){deferred[reject?"reject":"resolve"]("function"==typeof value?value.apply(value,args):value),$rootScope.$digest()},deferred.promise}return"function"==typeof value?value.apply(value,args):value}))}var mock={},properties={};return{getMock:function(objectName){if(!objectName)throw new Error("The name of the object that needs to be mocked is required.");return initializeMock(objectName),{mock:mock,returns:function(returnValue){return{"for":function(propertyName){if(!propertyName)throw new Error("The name of the property to set a return value for is required.");var property=properties[propertyName];if(!property)throw new Error("The property '"+propertyName+"' is not part of the object '"+objectName+"'.");return setPropertyValue(property,returnValue),"promise"===property.type?{resolve:function(scope){property.deferred(),scope&&scope.$digest()},reject:function(scope){property.deferred(!0),scope&&scope.$digest()}}:void 0}}},spy:function(propertyName){return properties[propertyName].spy}}}}}])}function Pretend(){var pretend=null;return{init:function(moduleName){if(!moduleName)throw new Error("A module name is required when initializing.");angular.module("pretend",[moduleName,"ngMock"]),createModule(),angular.module("pretend").run(function(Pretend){pretend=Pretend}),angular.bootstrap(document.createElement("div"),["pretend"])},mock:function(objectName){if(!pretend)throw new Error("Cannot create a mock prior to initialization.");return pretend.getMock(objectName)}}}var DEFAULT_RETURN_VALUE=void 0;window.pretend=new Pretend}();